(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[257],{59360:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/translate",function(){return a(82283)}])},82283:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return translate}});var t,l,s=a(85893),i=a(66409),r=a(66760),o=a(67294),c=a(81333),u=a(35005),d=a(31555),h=a(10682),g=a(55483),m=a(34051),p=a(35386),x=a(24486),f=a(29100),b=a(80516);(t=l||(l={})).Arabic="ar",t.Danish="da",t.Dutch="nl",t.English="en",t.Finnish="fi",t.French="fr",t.German="de",t.Italian="it",t.Japanese="ja",t.Korean="ko",t.Norwegian="no",t.Polish="pl",t.Portuguese_Brazil="pt-BR",t.Russian="ru",t.SimplifiedChinese="zh-CN",t.Spanish_LATAM="es-419",t.Spanish_Spain="es",t.Swedish="sv",t.Thai="th",t.TraditionalChinese="zh-TW",t.Turkish="tr";var j=a(28325),w=a(40460),y=a.n(w);a(74277),a(21819);let saveFile=(e,n)=>{let a=window.URL.createObjectURL(n),t=document.createElement("a");t.href=a,t.download=e,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(a)};var v=a(11105);let N=new v.$_,translateLocalization=async(e,n,a)=>{let t=Object.entries(e).filter(e=>{let[n,a]=e;return"string"==typeof a}),l=await N.translateBatch(t.map(e=>{let[n,a]=e;return a}),n,a),s=Object.fromEntries(t.map((e,n)=>{let[a,t]=e;return[a,l[n]]}));return JSON.stringify(s,null,2)},translateAll=async(e,n)=>Object.fromEntries(await Promise.all(Object.entries(l).filter(e=>{let[a,t]=e;return t!==n}).map(a=>{let[t,l]=a;return translateLocalization(e,n,l).then(async e=>[t,e]).catch(e=>(console.error("Failed to translate localization",t),console.error(e),[t,{}]))})));var k=a(55733),Z=a.n(k);let LanguageDropdown=e=>{let{language:n,setLanguage:a}=e;return(0,s.jsxs)(g.Z,{children:[(0,s.jsx)(x.Z,{className:"btd6-panel blue-insert-round",variant:"outline-light",children:n}),(0,s.jsx)(f.Z,{className:"non-main-panel bg-black btd6-panel blue-insert pe-0",children:(0,s.jsx)(r.VO,{children:Object.keys(l).map(e=>(0,s.jsx)(b.Z,{active:n==e,className:"p-0 me-3 w-auto text-white",onClick:()=>a(e),children:e},e))})})]})};var translate=()=>{var e;let n=null!==(e=(0,i.g)())&&void 0!==e?e:1e3,[a,t]=(0,o.useState)("{}"),[g,x]=(0,o.useState)({}),[f,b]=(0,o.useState)(""),[w,v]=(0,o.useState)("English"),[N,k]=(0,o.useState)("English");(0,p.Z)(()=>{try{x(JSON.parse(a||"{}"))}catch(e){}},1e3,[a,w,N]),(0,o.useEffect)(()=>{if(0==Object.keys(g).length||w===N){b(JSON.stringify(g,null,4));return}translateLocalization(g,l[w],l[N]).then(e=>b(e)).catch(e=>{alert("Translation Failed: ".concat(e))})},[g,w]);let S=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let handleSave=e=>{if((e.ctrlKey||e.metaKey)&&"s"===e.key){var n;e.preventDefault(),null===(n=S.current)||void 0===n||n.click()}};return window.addEventListener("keydown",handleSave),()=>window.removeEventListener("keydown",handleSave)},[N,f]),(0,s.jsxs)(r.ZP,{style:{height:n},footerClassName:"d-none",children:[(0,s.jsx)(c.Z,{title:"Translate Tool",description:"Auto translate localization files for BloonsTD6 Mods"}),(0,s.jsx)(h.Z,{fluid:r.wN,className:"d-flex flex-column main-panel btd6-panel blue flex-1 gap-2",children:(0,s.jsxs)(m.Z,{className:"h-10",children:[(0,s.jsxs)(d.Z,{xs:12,lg:6,className:"d-flex flex-column",children:[(0,s.jsx)(m.Z,{className:"g-2 mb-2",children:(0,s.jsx)(d.Z,{xs:"auto",children:(0,s.jsx)(LanguageDropdown,{language:w,setLanguage:v})})}),(0,s.jsx)(y(),{className:"btd6-panel white-insert",value:a,onValueChange:e=>t(e),highlight:e=>(0,j.highlight)(e,j.languages.json),padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,minHeight:400,outline:"none !important",color:"black"}})]}),(0,s.jsxs)(d.Z,{xs:12,lg:6,className:"d-flex flex-column",children:[(0,s.jsxs)(m.Z,{className:"g-2 mb-2",children:[(0,s.jsx)(d.Z,{xs:"auto",children:(0,s.jsx)(LanguageDropdown,{language:N,setLanguage:k})}),(0,s.jsx)(d.Z,{xs:"auto",children:(0,s.jsx)(u.Z,{className:"btd6-button long blue h-100 luckiest-guy px-5 mx-1",onClick:()=>window.navigator.clipboard.writeText(f),children:"Copy"})}),(0,s.jsx)(d.Z,{xs:"auto",children:(0,s.jsx)(u.Z,{className:"btd6-button long blue h-100 luckiest-guy px-5 mx-1",ref:S,onClick:()=>saveFile(N+".json",new Blob([f],{type:"text/plain"})),children:"Save"})}),(0,s.jsx)(d.Z,{xs:"auto",className:"ms-auto",children:(0,s.jsx)(u.Z,{className:"btd6-button long blue h-100 luckiest-guy px-2 mx-1",onClick:async()=>{let e=await translateAll(g,l[w]),n=new(Z());for(let[a,t]of Object.entries(e))n.file(a+".json",t+"\n");await n.generateAsync({type:"blob"}).then(e=>{saveFile("Localization.zip",e)})},children:"Translate All"})})]}),(0,s.jsx)(y(),{className:"btd6-panel white-insert",value:f,onValueChange:()=>{},highlight:e=>(0,j.highlight)(e,j.languages.json),padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,minHeight:400},readOnly:!0})]})]})})]})}}},function(e){e.O(0,[234,636,486,774,888,179],function(){return e(e.s=59360)}),_N_E=e.O()}]);