(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[128],{2075:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mod-browser",function(){return n(3614)}])},2178:function(e,t,n){"use strict";n.d(t,{c:function(){return N},v:function(){return j}});var a=n(5893),s=n(5402),r=n(3301),l=n(2398),i=n(3398),o=n(4912),c=n(983),d=n(2935),u=n(1810),A=n(3570),h=n(6100),p=n(6861),m=n(7685),g=n(7294),b=n(1664),w=n.n(b),f=n(9523);let x=(e,t)=>(e.startsWith("https://github.com/gurrenm3/BTD-Mod-Helper/wiki")&&(e=e.replace("https://github.com/gurrenm3/BTD-Mod-Helper","")),!t||e.startsWith("http")||(e.startsWith("/")||(e="/"+e),t.endsWith("/")&&(t=t.substring(0,t.length-1)),e.startsWith(t)||(e=t+e)),e.startsWith("http")||(e=e.replace(/\.md/,"")),e),v=(e,t)=>({rewrite:n=>{var a,s,r,l;if("element"===n.type&&n.properties){if("code"===n.tagName&&(n.properties.className=[...new Set([...null!==(l=n.properties.className)&&void 0!==l?l:[],"hljs"])]),"a"===n.tagName&&(null===(a=n.properties)||void 0===a?void 0:a.href)){let t=n.properties.href;n.properties.href=x(t,e)}if("img"===n.tagName&&(null===(s=n.properties)||void 0===s?void 0:s.src)){let e=n.properties.src;n.properties.src=x(e,t)}"img"===n.tagName&&(null===(r=n.properties)||void 0===r?void 0:r.src)==="https://raw.githubusercontent.com/gurrenm3/BTD-Mod-Helper/master/banner.png"&&(n.tagName="div")}}}),N=(e,t)=>(0,s.j)().use(r.Z).use(l.Z,{allowDangerousHtml:!0}).use(i.Z).use(o.Z,{detect:!0,ignoreMissing:!0,aliases:{json:"json5"}}).use(c.Z).use(d.Z,{properties:{"aria-hidden":"true",tabIndex:-1,className:[""]}}).use(u.Z,v(e,t)).use(A.Z),j=e=>(0,h.a)().use(p.Z,{fragment:!0}).use(e?f.Z:()=>{}).use(m.Z,{createElement:g.createElement,Fragment:g.Fragment,components:{a:e=>e.href?(0,a.jsx)(w(),{...e}):(0,a.jsx)("a",{...e})}})},3614:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ey}});var a,s,r,l,i,o=n(5893),c=n(7544),d=n(7294),u=n(682),A=n(4051),h=n(1555),p=n(1211),m=n(4716),g=n(5005),b=n(169),w=n(6968),f=n(6518),x=n(1479),v=n(6212),N=n(147),j=n(3539),R=n(5386);let D=e=>"string"==typeof e&&"true"==e.toLowerCase()||parseInt(e)>0,M=async e=>{try{let t=await fetch(e,{cache:"force-cache"});if(!(null==t?void 0:t.ok))return Promise.reject();return await t.text()}catch(e){return Promise.reject()}},y=async e=>{try{let t=await fetch(e,{cache:"force-cache"});if(!(null==t?void 0:t.ok))return Promise.reject();return await t.json()}catch(e){return Promise.reject()}};var S=n(8057),Z=n.n(S);let B=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=new RegExp(n,a?"mg":"").exec(t);if(s){let t=a?s.slice(1).join(""):s["1"];if("string"===e)return t;if("boolean"===e)return D(t)}},E=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.Name=B("string",t,'\\bName\\s*=\\s*"(.+)";?[\n\r]+'),e.Description=B("string",t,'\\bDescription\\s*=(?:[\\s+]*"(.+)")(?:[\\s+]*"(.+)")?(?:[\\s+]*"(.+)")?(?:[\\s+]*"(.+)")?(?:[\\s+]*"(.+)")?(?:[\\s+]*"(.+)")?(?:[\\s+]*"(.+)")?;?[\n\r]+',!0),e.Icon=B("string",t,'\\bIcon\\s*=\\s*"(.+\\.png)";?[\n\r]+'),e.DllName=B("string",t,'\\bDllName\\s*=\\s*"(.+\\.dll)";?[\n\r]+'),e.ManualDownload=B("boolean",t,"\\bManualDownload\\s*=\\s*(false|true);?[\n\r]+"),e.ZipName=B("string",t,'\\bZipName\\s*=\\s*"(.+\\.zip)";?[\n\r]+'),e.Author=B("string",t,'\\bAuthor\\s*=\\s*"(.+)";?[\n\r]+'),e.SubPath=B("string",t,'\\bSubPath\\s*=\\s*"(.+)";?[\n\r]+'),n&&(e.RepoName=B("string",t,'\\bRepoName\\s*=\\s*"(.+)";?[\n\r]+'),e.RepoOwner=B("string",t,'\\bRepoOwner\\s*=\\s*"(.+)";?[\n\r]+')),e.SquareIcon=B("boolean",t,"\\SquareIcon\\s*=\\s*(false|true);?[\n\r]+"),e.ExtraTopics=B("string",t,'\\bExtraTopics\\s*=\\s*"(.+)";?[\n\r]+'),e.WorksOnVersion=B("string",t,'\\bWorksOnVersion\\s*=\\s*"(.+)";?[\n\r]+'),e.Dependencies=B("string",t,'\\bDependencies\\s*=\\s*"(.+)";?[\n\r]+'),e.Version=B("string",t,'\\bVersion\\s*=\\s*"(.*)";?[\n\r]+')},k=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=JSON.parse(t)||{};for(let t in a)(n||"RepoName"!==t&&"RepoValue"!==t)&&(e[t]=a[t])},O=e=>(null==e?void 0:e.Name)||(null==e?void 0:e.RepoName)||"",V=e=>(null==e?void 0:e.Author)||(null==e?void 0:e.RepoOwner)||"",U=e=>e?((null==e?void 0:e.Version.toLowerCase().startsWith("v"))?"":"v")+(null==e?void 0:e.Version):"",C=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:34;return(null!==(s=null===(t=Z().coerce(null==e?void 0:e.WorksOnVersion))||void 0===t?void 0:t.major)&&void 0!==s?s:0)<n},P=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return!e.SubPath||e.SubPath.endsWith(".txt")||e.SubPath.endsWith(".json")||(t=e.SubPath+"/"+t),"https://github.com/".concat(e.RepoOwner,"/").concat(e.RepoName,"/tree/").concat(e.Branch,"/").concat(t)},H=e=>"https://www.github.com/".concat(null==e?void 0:e.RepoOwner,"/").concat(null==e?void 0:e.RepoName,"/stargazers"),T=e=>{var t;return Math.ceil((null!==(r=null==e?void 0:null===(t=e.Repository)||void 0===t?void 0:t.stargazers_count)&&void 0!==r?r:0)/Math.max(1,null!==(l=null==e?void 0:e.CountOfMonoRepo)&&void 0!==l?l:0))},I=e=>{var t;return Z().coerce(null!==(t=e.Version)&&void 0!==t?t:"")?e.RepoName?e.RepoOwner?!e.SubPath||e.DllName||e.ZipName?null:"SubPath used without DllName/ZipName":"RepoOwner is null/empty":"RepoName is null/empty":"".concat(e.Version," is not a valid SemVer")},F=(e,t)=>{let n=t?encodeURIComponent(t):"";return!e.SubPath||e.SubPath.endsWith(".json")||e.SubPath.endsWith(".cs")||e.SubPath.endsWith(".txt")||(n="".concat(e.SubPath,"/").concat(n)),"".concat("https://raw.githubusercontent.com","/").concat(e.RepoOwner,"/").concat(e.RepoName,"/").concat(e.Branch,"/").concat(n)},z=e=>F(e,e.Icon||"Icon.png"),W=async(e,t)=>{var n,a;let s;let r={RepoName:e.name,RepoOwner:e.owner.login,Repository:e,SubPath:t,Branch:e.default_branch},l=B("string",null!==(n=e.description)&&void 0!==n?n:"",'Mod\\s+Browser\\s+Branch\\s*:\\s*"([a-zA-Z0-9\\.\\-_\\/]+)"');l&&(r.Branch=l);let i=B("string",null!==(a=e.description)&&void 0!==a?a:"",'Mod\\s*Helper\\s*Data\\s*:\\s*"([a-zA-Z0-9\\.\\-_\\/ ]+)"');if(i&&(r.DataPath=i),r.SubPath&&(r.SubPath.endsWith(".txt")||r.SubPath.endsWith(".json")||r.SubPath.endsWith(".cs"))?s=await M(F(r,r.SubPath)):r.DataPath&&(s=await M(F(r,r.DataPath))),!s)try{s=await Promise.any([M(F(r,"ModHelperData.cs")),M(F(r,"ModHelperData.json")),M(F(r,"ModHelperData.txt"))])}catch(e){}if(!s){console.warn("Didn't find any ModHelperData for ".concat(r.RepoName));return}let o=s.trimStart().startsWith("{");o?k(r,s):E(r,s);let c=I(r);if(c){console.warn(c),console.warn(r);return}return r.Topics=[...e.topics,...r.ExtraTopics?r.ExtraTopics.split(","):[]],r.Identifier="".concat(r.RepoOwner,"/").concat(r.RepoName)+(r.SubPath?"/"+r.SubPath:""),r},L=async e=>{let t;let n=F({RepoOwner:e.owner.login,RepoName:e.name,Branch:e.default_branch},"ModHelperMods.json");try{t=await y(n)}catch(e){return[]}return t?await Promise.all(t.map(async n=>{let a=await W(e,n);return a&&(a.CountOfMonoRepo=t.length),a})):[]},q=(e,t,n)=>{let a=[];if(e.Dependencies)for(let s of e.Dependencies.split(","))s in t&&!(null==n?void 0:n.includes(s))&&(a.push(s),a.push(...q(t[s],t,a)));return a};var _=n(4183);let G="btd6-mod",X="https://raw.githubusercontent.com/".concat("gurrenm3","/").concat("BTD-Mod-Helper","/").concat("master","/modders.json"),Q=async()=>await fetch(X).then(e=>e.json()),Y=async e=>{let t=new _.vd,[n,a,s]=e.split("/"),r=await t.rest.repos.get({owner:n,repo:a});if(r.data)return await W(r.data,s)},J=async(e,t)=>{let n=new _.vd,a=0,s=0,r=1;Date.now();let l=n.rest.search.repos({q:"topic:".concat(G),per_page:100,page:r}),i=(await l).data;for(t(i.total_count);i.items&&i.items.length>0;){await Promise.all(i.items.map(async t=>{let n=await W(t);n?(e(n),a++):s++})),r++;let t=await n.rest.search.repos({q:"topic:".concat(G),per_page:100,page:r});console.log(t.headers),console.log(t.status),i=t.data}let o=(await n.rest.search.repos({q:"topic:".concat("btd6-mods"),per_page:100})).data;if(o.items&&o.items.length>0)for(let n of o.items){let s=await L(n);for(let n of(t(i.total_count+o.total_count+s.length),s))n&&(e(n),a++)}t(a)},K=async(e,t,n)=>{if(!e.LatestRelease){let t=new _.vd;e.LatestRelease=t.rest.repos.getLatestRelease({owner:e.RepoOwner,repo:e.RepoName}).then(e=>e.data).catch(()=>null)}let a=await e.LatestRelease;if(a){a.mod=e,t?t(a):($(a),e.Dependencies&&n&&n(e));return}e.DllName&&(window.open(F(e,e.DllName),"_blank"),e.Dependencies&&n&&n(e))},$=e=>{var t;if(!e)return;let n=e.mod,a=null!==(t=e.assets.find(e=>e.name===n.DllName||e.name===n.ZipName))&&void 0!==t?t:e.assets[0];window.open(a.browser_download_url,"_blank")};var ee=n(6486);let et=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",a=e.query[t],s=(0,ee.isArray)(a)?a.join(n):a;return[s,n=>e.replace({query:{...e.query,[t]:n}},void 0,{scroll:!1})]},en=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.query[t];return[null!=a?"true"==a:n,n=>e.replace({query:{...e.query,[t]:String(n)}},void 0,{scroll:!1})]},ea=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=e.query[t];return[(0,ee.isNaN)(a)||(0,ee.isNaN)(parseInt(String(a)))?n:parseInt(String(a)),n=>e.replace({query:{...e.query,[t]:String(n)}},void 0,{scroll:!1})]};var es=n(1163),er=n(4486),el=n(9100),ei=n(516),eo=n(6409),ec=n(9632),ed=n(4184),eu=n.n(ed);let eA=e=>{switch(e){case"doombubbles":return"rgba(200, 0, 255, 255)";case"gurrenm3":return"rgba(200, 150, 255, 255)";default:return"white"}};var eh=n(5675),ep=n.n(eh),em={src:"/BTD-Mod-Helper//_next/static/media/Star.8cfad2d5.png",height:219,width:220,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAVFBMVEXqt4bevk/BlTjZrkSxgzP/3UTswD5GOBzNqED/4Ez/5Vndv0/311rHnD2qdyOyfRzYtVnt2lf93Trozl/jzHj/1jX//Wb/7FT/93f/8YX/91P//55swkG+AAAAFXRSTlMBzn/Ob/71B7T9/eP9kFJdyPL99tRx6xUFAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAQElEQVR4nAXBhQHAIBAAscP6OFSAyv57NkEQ7wUB7FwW0Gp/xmY06XVjHDNRNxfCOiv4GOLdQdSd83cJFNNaL/xVpgKfOJZy4wAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},eg={src:"/BTD-Mod-Helper//_next/static/media/HomeBtn.f5b81f60.png",height:346,width:346,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAWlBMVEVNttpNp9QB2PhmutlxqMp8vdutztmi5fVgrdFioslYqtRUpdGS6PWux9Vst9VO1fh45PU+0/pin8aDpsC0uroDt/0B3f8Axf4N1vqu6/a97vYA0/7///804v/UBUbuAAAAFXRSTlPw7/74pe9X/cS999z+SbP6/PiziimCt0wmAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAQ0lEQVR4nB3BBxLAIAgEwNOoQHoFW/7/zcxkFykOAJAQX81ZdcWovhavDNfm3vfGcFaokjEm24gOE/DzC1hEzhCu+wN52wORnCGqSgAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},eb={src:"/BTD-Mod-Helper//_next/static/media/InfoBtn.e90cb0d0.png",height:130,width:130,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAYFBMVEVMaXF2nbVznbei6vYA0v+EorT///8A4f9lkrKjrbmarbuUqbr///z/9utgk7G4vcX///////8Axv8lx+shvuUAwfAGqOQaqNY60Oqz6fZu4fYIkdQAteoils0urtgPjs3FM0G3AAAAF3RSTlMA2ej+/c0V/NiToawqOfKFDxv6/f7//uod2MMAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABGSURBVHicDcvHAYAgEATAJd4BgpFo6r9Lnf8Aa5DCTYA1z37UFOEqDUXFQ2ZqjTJDXLornRnzvfWhz4DFvKWcKQLWM//9A3RtA1hopZ57AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},ew={src:"/BTD-Mod-Helper//_next/static/media/ArrowHideBtn.b535f10a.png",height:166,width:166,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAYFBMVEX///99p8F+psJ0pMEf4f2pt8Suu8lMaXGbscVsnr368u4AqvEAy/9Q3Pdi2fjJztOYssX//+93pcJYn8D/+/QQzvba9/nZ+PsGtuj+/v4MltkDwPM03/gmmtMcst8kuuaUw8QSAAAAGHRSTlMf3+fy+6GvALftQv74/v6T1DL9+kf+/v7vSScUAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAARUlEQVR4nAXBBwKAIAwEsENG2W5tAfX/vzQBwW/KrgSoz5y8R9jXjGHYQ/MtcvWAiYtI6QHzk2vNzQNLS6mFAwSnlYv0A37vA3qbtXAzAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},ef={src:"/BTD-Mod-Helper//_next/static/media/VerifiedIcon.c6f0b4b6.png",height:90,width:90,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAALVBMVEUAHlsJF1Lu8vf9/v9MaXG/y9higKFZeJxXdptVdJve5OuhtMvZ4OhQcZYiS3oVu5Z9AAAAC3RSTlM7Dv7+AP3RxcTD/dk4Ms4AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAA5SURBVHicRcuxAYAwDMRA2R8nDg/sPy5QUevECFYTg5jO9AywVGXoPM6rtNnybWV/qVLmxyPo9e4PLl8BRzqMGSwAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},ex={src:"/BTD-Mod-Helper//_next/static/media/DownloadBtn.b6a3119b.png",height:346,width:346,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAbFBMVEVs5wRpuVC666DG7qFsu1BxxUJ4xVF2ul1A2gFxr2RQ3QZ9tnCLynG707CYyoSEx2Szz6qr5od1vWKyzq6Fw2rX87yBtHS0urqKsYEvzwJz4Rb///9d3QL1+vBn7AA01gCL7jTg8tg60Apz5RBgNSMkAAAAIHRSTlP+4/389fPtwv65/KnrXvP4Uf7ISbP7nSmK//7//////uPYYtYAAAAJcEhZcwAADsIAAA7CARUoSoAAAABFSURBVHicBcGFAcAgEASwQx+pO96y/5BNME6zUlovGF7EiHpAIn8lVoLMa0kCBGZ4SsIRWDP8dIawhRZ66B67tdZfz/0DhiMD6d2UNgkAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},ev=n(2178);let eN=e=>{var t;let{mod:n,data:a,selectMod:s,showRelease:r,mini:l}=e,i=n.SquareIcon?50:60,c=n.SquareIcon?"-.75rem":"-1rem",[u,p]=(0,d.useState)(!1),m=(0,d.useMemo)(()=>(0,ev.v)().processSync((null!==(t=n.Description)&&void 0!==t?t:"").replaceAll("\\n","<br/>")).result,[n.Description]);return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"d-flex",children:[(0,o.jsxs)(A.Z,{className:eu()("non-main-panel bg-black bg-opacity-50 btd6-panel blue","user-select-none","flex-fill mx-0 p-md-0 gap-3 gap-md-0 gx-0 gx-md-3","align-items-center align-content-around","luckiest-guy lh-1 fs-5","flex-wrap flex-md-nowrap",l?"justify-content-between":"justify-content-around"),children:[(0,o.jsx)(h.Z,{id:"icon",xs:"auto",style:{margin:"-1rem 0 -1rem ".concat(c)},className:"d-lg-block",children:(0,o.jsx)("div",{style:{height:60,width:60},className:"d-flex",children:(0,o.jsx)("img",{alt:"",src:z(n),onError:e=>{let t=e.target;t.style.height="0",t.style.width="0",t.parentElement.parentElement.classList.add("d-none")},height:i,width:i,className:"m-auto"})})}),(0,o.jsx)(h.Z,{id:"name",xs:8,sm:"auto",md:3,className:"text-outline-black",style:{overflowWrap:"break-word"},children:O(n)}),(0,o.jsx)(h.Z,{id:"author",xs:8,sm:"auto",md:4,className:"text-center",children:(0,o.jsxs)("a",{className:"text-outline-black text-decoration-none",href:"https://github.com/".concat(n.RepoOwner),style:{color:eA(n.RepoOwner)},target:"_blank",children:[V(n),a.verified.includes(n.RepoOwner)&&(0,o.jsx)(ep(),{src:ef,height:20,width:20,alt:"VerifiedIcon",className:"ms-1 user-select-none",draggable:!1})]})}),!l&&(0,o.jsx)(h.Z,{id:"version",xs:"auto",className:"text-outline-black",style:{minWidth:"5rem"},children:U(n)}),!l&&(0,o.jsxs)(h.Z,{xs:"auto",id:"stars",className:"mx-md-auto text-outline-black",children:[(0,o.jsx)("a",{href:H(n),className:"btn btd6-button p-0 border-0",target:"_blank",children:(0,o.jsx)(ep(),{src:em,height:25,width:25,alt:"Star",className:"mb-1 me-1 user-select-none",draggable:!1})}),T(n),n.CountOfMonoRepo?"+":" "]}),s&&(0,o.jsx)(h.Z,{id:"info",xs:"auto",children:(0,o.jsx)(ep(),{src:eb,alt:"More Info",className:"btn btd6-button m-0 p-0 border-0",height:35,draggable:!1,onClick:()=>s(n)})}),(0,o.jsx)(h.Z,{id:"description",xs:"auto",children:(0,o.jsx)(ep(),{src:ew,alt:"Description",className:"btn btd6-button m-0 p-0 border-0",height:35,draggable:!1,onClick:()=>p(!u)})})]},n.Identifier),(0,o.jsxs)("div",{className:"flex-shrink-0 d-flex gap-3 ms-3 flex-column flex-md-row justify-content-around",children:[(0,o.jsx)("a",{href:P(n,"#readme"),target:"_blank",children:(0,o.jsx)(ep(),{src:eg,alt:"Homepage",className:"btn btd6-button m-0 p-0 border-0",height:50,width:50,loading:"eager",draggable:!1})}),(0,o.jsx)(g.Z,{className:"p-0 bg-transparent border-0",onClick:()=>K(n,r,l?void 0:s),children:(0,o.jsx)(ep(),{src:ex,alt:"Download",className:"btn btd6-button m-0 p-0 border-0",height:50,width:50,draggable:!1,loading:"eager"})})]})]}),(0,o.jsx)(f.Z,{in:u,children:(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"mt-2 btd6-panel blue-insert text-white",children:m})})})]})};var ej={src:"/BTD-Mod-Helper//_next/static/media/WarningSign.d9bde8f8.png",height:235,width:256,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAKlBMVEVMaXG6Lhe6Lha5LRe6Lhe7LxW5Lhe5Lha8Lhe5LRe4LRe8MBa7MxbGMRi9G0SZAAAADXRSTlMAZMOZpjjdnbfy7kUtjLYCbAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAADNJREFUeJwdiMkNADAIwxKgF232X7cCf2wZAHyheXOOjk1aeYjUraEVMoCSh0RYHo+T9gEXuwD9gvGrMAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:7},eR=n(1419);(a=i||(i={})).RecentlyUpdated="Recently Updated",a.Popularity="Popularity",a.Alphabetical="Alphabetical",a.New="New",a.Old="Old";let eD=e=>t=>{var n,a;let s=new Date(t.Repository.created_at).getTime(),r=new Date(t.Repository.pushed_at||t.Repository.created_at).getTime();if((null!==(n=t.CountOfMonoRepo)&&void 0!==n?n:1)>1){let e=Math.floor(Math.sqrt(null!==(a=t.CountOfMonoRepo)&&void 0!==a?a:1)),n=Date.now()-r;r-=n*e}switch(e){case i.Popularity:return-T(t);case i.Alphabetical:return O(t);case i.Old:return s;case i.New:return-s;case i.RecentlyUpdated:default:return-r}},eM="Filter Topic";var ey=()=>{var e;let t=(0,es.useRouter)(),n=null!==(e=(0,eo.g)())&&void 0!==e?e:1e3,[a,s]=(0,d.useState)({forceVerifiedOnly:!1,verified:[],banned:[],bannedMods:[],topics:[]}),[r,{upsert:l,reset:D}]=(0,N.Z)([]),[M,{set:y,reset:S}]=(0,j.Z)({}),[Z]=(0,d.useState)(()=>new ec.Z([],{keys:["Name","RepoName","RepoOwner","Author"]})),B=e=>{!e||a.banned.includes(e.RepoOwner)||a.bannedMods.includes(e.Identifier)||(l(t=>t.Identifier===e.Identifier,e),Z.add(e),y(e.Identifier,e))},[E,k]=(0,d.useState)(100),V=()=>{D(),S(),Z.remove(()=>!0),J(B,e=>{k(e),console.log("Setting count to ".concat(e))}).then(()=>console.log("Finished populating mods"))};(0,d.useEffect)(()=>{Q().then(s).then(()=>console.log("Got modders data")),V()},[]);let[H,T]=et(t,"selected-mod"),[I,z]=et(t,"topic"),[W,L]=et(t,"search"),[_,G]=(0,d.useState)(""),[X,K]=en(t,"unverified"),[ed,eA]=ea(t,"old",34);(0,R.Z)(()=>L(_),500,[_]),(0,d.useEffect)(()=>{!H||H in M||Y(H).then(B)},[H]);let[eh,em]=et(t,"sort"),eg=(0,d.useMemo)(()=>(0,ee.chain)(W?Z.search(W).map(e=>e.item):r).filter(e=>!C(e,ed)).filter(e=>X&&!a.forceVerifiedOnly||a.verified.includes(e.RepoOwner)).filter(e=>!I||I===eM||e.Topics.includes(I)).sortBy(eD(eh||i.RecentlyUpdated)).value(),[r,eh,I,W,X,ed]),[eb,ew]=(0,d.useState)(void 0),ex=(0,d.useMemo)(()=>{if(!(null==eb?void 0:eb.body))return(0,o.jsx)(o.Fragment,{});let e=eb.body.split(/<!--Mod Browser Message Start-->[\r\n\s]*/).findLast(e=>!!e),t=(0,ev.c)(F(eb.mod)).processSync(e);if(!t)return(0,o.jsx)(o.Fragment,{});let n=(0,ev.v)(!0).processSync(t.toString()).result;return n},[eb]),[ey,eS]=(0,d.useState)((0,o.jsx)(o.Fragment,{}));(0,d.useEffect)(()=>{if(!H||!(H in M)){eS((0,o.jsx)(o.Fragment,{}));return}let e=M[H],t=F(e,"README.md");fetch(t,{cache:"force-cache"}).then(async t=>{let n=t?await t.text():"This mod has no README.md";n&&n.trim()||(n="This mod has an empty README.md");let a=await (0,ev.c)(P(e),F(e)).process(n),s=await (0,ev.v)(!0).process(a.toString());eS(s.result)})},[H,M[H]]);let eZ=(0,d.useMemo)(()=>H&&H in M?q(M[H],M).filter(e=>e!==H):[],[H,M]),eB=(0,d.useRef)(null);return(0,o.jsxs)(c.ZP,{style:{height:n},backToTop:()=>{var e;return null===(e=eB.current)||void 0===e?void 0:e.scrollTop(0)},children:[(0,o.jsxs)(u.Z,{fluid:c.wN,className:"d-flex flex-column main-panel btd6-panel blue flex-1 gap-2",children:[(0,o.jsxs)(A.Z,{className:"g-3 justify-content-between",children:[(0,o.jsx)(h.Z,{xs:7,lg:5,className:"flex-grow-1",children:(0,o.jsx)(p.Z,{onSubmit:e=>{e.preventDefault(),L(_)},children:(0,o.jsx)(m.Z,{value:_,className:"btd6-panel blue-insert-round text-white",placeholder:"Search...",onChange:e=>G(e.target.value)})})}),!a.forceVerifiedOnly&&(0,o.jsx)(h.Z,{xs:"auto",className:"order-lg-last",children:(0,o.jsx)(g.Z,{variant:"outline-light",className:eu()("btd6-button",X?"yellow":"blue"),onClick:()=>K(!X),children:X?(0,o.jsx)(ep(),{src:ej,alt:"Unverified",height:20,width:20,className:"p-0",draggable:!1}):(0,o.jsx)(ep(),{src:ef,alt:"Verified",height:20,width:20,className:"p-0",draggable:!1})})}),(0,o.jsx)(h.Z,{xs:5,lg:2,className:"order-lg-first",children:(0,o.jsxs)(b.Z,{children:[(0,o.jsx)(er.Z,{variant:"outline-light",className:"btd6-panel blue-insert-round w-100",children:eh||i.RecentlyUpdated}),(0,o.jsx)(el.Z,{className:"non-main-panel bg-black btd6-panel blue-insert",children:Object.entries(i).map(e=>{let[t,n]=e;return(0,o.jsx)(ei.Z,{active:eh===n,onClick:()=>em(n),className:"text-white",children:n},t)})})]})}),(0,o.jsx)(h.Z,{xs:4,lg:2,children:(0,o.jsxs)(b.Z,{children:[(0,o.jsx)(er.Z,{variant:"outline-light",className:"btd6-panel blue-insert-round w-100",children:I||eM}),(0,o.jsxs)(el.Z,{className:"non-main-panel bg-black btd6-panel blue-insert",children:[(0,o.jsx)(ei.Z,{onClick:()=>z(eM),className:"text-white",active:I===eM,children:"Any"}),a.topics.map(e=>(0,o.jsx)(ei.Z,{onClick:()=>z(e),className:"text-white",active:I===e,children:e},e))]})]})}),(0,o.jsx)(h.Z,{xs:3,lg:2,children:(0,o.jsxs)(b.Z,{children:[(0,o.jsx)(er.Z,{variant:"outline-light",className:"btd6-panel blue-insert-round w-100",children:0===ed?"All":"BTD6 v".concat(ed,"+")}),(0,o.jsxs)(el.Z,{className:"non-main-panel bg-black btd6-panel blue-insert",children:[(0,ee.rangeRight)(34,37).map(e=>(0,o.jsx)(ei.Z,{onClick:()=>eA(e),className:"text-white",active:ed===e,children:"BTD6 v".concat(e,"+")},e)),(0,o.jsx)(ei.Z,{onClick:()=>eA(0),className:"text-white",active:0===ed,children:"All"})]})]})})]}),(0,o.jsx)(eR.w,{}),(0,o.jsxs)("div",{className:"flex-grow-1 position-relative btd6-panel blue-insert-round overflow-hidden p-0",children:[0===r.length&&(0,o.jsx)("div",{className:"position-absolute top-50 start-50 translate-middle",children:(0,o.jsx)(w.Z,{})}),(0,o.jsx)(c.VO,{ref:eB,className:"position-absolute h-100",autoHeightMin:"100%",autoHeightMax:"100%",children:(0,o.jsx)("div",{className:"d-flex flex-column gap-3 p-3",children:eg.map(e=>(0,o.jsx)(eN,{mod:e,data:a,selectMod:e=>T(e.Identifier),showRelease:ew},e.Identifier))})})]}),(0,o.jsx)(f.Z,{in:r.length<E,children:(0,o.jsx)(x.Z,{max:E,now:r.length,animated:!0,className:"mt-1"})})]}),(0,o.jsxs)(v.Z,{id:"release",show:!!eb,onHide:()=>ew(void 0),dialogClassName:eu()("main-panel btd6-panel blue"),contentClassName:eu()("main-panel btd6-panel blue-insert-round pb-0 shadow-none"),children:[(0,o.jsx)(v.Z.Header,{closeButton:!0,closeVariant:"white",children:(0,o.jsxs)(v.Z.Title,{className:"luckiest-guy text-outline-black",children:[O(null==eb?void 0:eb.mod)," ",U(null==eb?void 0:eb.mod)]})}),(0,o.jsx)(v.Z.Body,{children:ex}),(0,o.jsxs)(v.Z.Footer,{className:"p-0 luckiest-guy d-flex justify-content-between",children:[(0,o.jsx)(g.Z,{variant:"outline-light",className:"btd6-button red long fs-5 pb-2 text-outline-black",style:{height:45},onClick:()=>ew(void 0),children:"Cancel"}),(0,o.jsx)(g.Z,{variant:"outline-light",className:"btd6-button blue long fs-5 pb-2 text-outline-black",style:{height:45},onClick:()=>window.open("https://github.com/".concat(null==eb?void 0:eb.mod.RepoOwner,"/").concat(null==eb?void 0:eb.mod.RepoName,"/releases")),children:"More"}),(0,o.jsx)(g.Z,{variant:"outline-light",className:"btd6-button green long fs-5 pb-2 text-outline-black",style:{height:45},onClick:()=>{$(eb),(null==eb?void 0:eb.mod.Dependencies)&&T(eb.mod.Identifier),ew(void 0)},children:"Download"})]})]}),(0,o.jsxs)(v.Z,{id:"selectedMod",show:!!H&&H in M,size:"xl",onHide:()=>T(""),dialogClassName:eu()("main-panel btd6-panel blue"),contentClassName:eu()("main-panel btd6-panel blue-insert-round pb-0 shadow-none"),children:[(0,o.jsxs)(v.Z.Header,{closeButton:!0,closeVariant:"white",children:["README.md for ",O(M[H])]}),(0,o.jsx)(v.Z.Body,{children:ey}),eZ.length>0&&(0,o.jsxs)(v.Z.Footer,{className:"flex-column",children:[(0,o.jsx)("div",{className:"fs-2 m-0",children:"Dependencies"}),(0,o.jsx)("div",{children:"This mod has the following dependencies. It may not function properly if you don't download them as well."}),(0,o.jsx)("div",{className:"w-100 d-flex flex-column gap-3",children:eZ.map(e=>{let t=M[e];return t?(0,o.jsx)(eN,{mod:t,data:a,mini:!0}):(0,o.jsx)("div",{className:"w-100 text-center",children:e})})})]})]})]})}},5696:function(){}},function(e){e.O(0,[662,206,427,774,888,179],function(){return e(e.s=2075)}),_N_E=e.O()}]);